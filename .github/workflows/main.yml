# .github/workflows/main.yml
[cite_start]name: 'Lint Code' # Workflow ka naam [cite: 31]
on:
  [cite_start]push: # Jab koi push kare [cite: 13]
    branches: [master, main]
  [cite_start]pull_request: # Jab koi Pull Request (PR) create kare [cite: 14]
    branches: [master, main]

jobs:
  # 1. Python Linting Job (Python files check karega)
  lint_python:
    name: Lint Python Files
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository # Code download karna
        [cite_start]uses: actions/checkout@v3 [cite: 43]

      - name: Set up Python
        [cite_start]uses: actions/setup-python@v4 [cite: 45]
        with:
          [cite_start]python-version: 3.12 [cite: 47]

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip [cite: 50]
          pip install flake8 # Linter tool install kiya [cite: 51]

      - name: Run Linter
        run: |
          # Yeh command server directory mein sabhi .py files par flake8 chalaegi [cite: 59, 99]
          find ./server -name "*.py" -exec flake8 {} + 
          echo "Linted all the python files successfully" [cite: 61]

  # 2. JavaScript Linting Job (JavaScript files check karega)
  lint_js:
    name: Lint JavaScript Files
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        [cite_start]uses: actions/checkout@v3 [cite: 67]

      - name: Install Node.js
        [cite_start]uses: actions/setup-node@v3 [cite: 69, 102]
        with:
          [cite_start]node-version: 14 [cite: 71]

      - name: Install JSHint
        [cite_start]run: npm install jshint --global [cite: 73, 103]

      - name: Run Linter
        run: |
          # server/database directory mein sabhi .js files par JSHint chalao [cite: 76, 104]
          find ./server/database -name "*.js" -exec jshint {} +
          echo "Linted all the js files successfully" [cite: 77]
